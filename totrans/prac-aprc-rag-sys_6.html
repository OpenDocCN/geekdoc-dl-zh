<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>5  Observability Tools for RAG</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>5  Observability Tools for RAG</h1>
<blockquote>原文：<a href="https://mallahyari.github.io/rag-ebook/05_observability_tools.html">https://mallahyari.github.io/rag-ebook/05_observability_tools.html</a></blockquote>

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">

</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>An observability tool is a software or platform designed to help monitor, analyze, and gain insights into the performance, behavior, and health of a complex system, such as a machine learning model, a RAG system, or a software application. These tools provide visibility into various aspects of a system, allowing operators, administrators, and developers to understand how the system operates and to detect and troubleshoot issues.</p>
<p>Key components and features of an observability tool typically include:</p>
<ol type="1">
<li><p><strong>Data Collection:</strong> Observability tools collect data from various sources within the system. This data can include metrics (e.g., CPU usage, memory usage), logs, traces, events, and more. The broader the range of data collected, the more comprehensive the observability.</p></li>
<li><p><strong>Storage:</strong> Data collected by the tool is stored for analysis and historical reference. The storage can be in the form of time-series databases, log repositories, or other storage solutions designed to handle large volumes of data.</p></li>
<li><p><strong>Analysis:</strong> Observability tools provide analytical capabilities to process and make sense of the collected data. This includes querying data, aggregating metrics, and identifying patterns or anomalies.</p></li>
<li><p><strong>Visualization:</strong> The tools offer visualization capabilities to create graphs, charts, dashboards, and reports that make it easier for users to interpret data. Visualizations help spot trends, issues, and performance bottlenecks.</p></li>
<li><p><strong>Alerting:</strong> Many observability tools allow users to define alerting rules. When certain conditions are met, the tool sends notifications, enabling operators to respond to issues promptly.</p></li>
<li><p><strong>Tracing:</strong> For distributed systems, tracing is important. Observability tools often provide tracing features to track requests as they move through various services or components of a system. This helps pinpoint performance bottlenecks and issues.</p></li>
<li><p><strong>User Interface:</strong> A user-friendly interface is essential for interacting with the data and insights generated by the observability tool. It should allow users to explore data, set up alerts, and visualize information.</p></li>
<li><p><strong>Integration:</strong> Observability tools should integrate with various components of the system, such as applications, databases, containers, and cloud services, to capture relevant data.</p></li>
<li><p><strong>Scalability:</strong> The tool should be able to scale with the system it monitors. It needs to handle growing data volumes and provide insights without compromising performance.</p></li>
<li><p><strong>Customization:</strong> Users should be able to customize the tool to meet the specific needs of their system. This includes defining custom dashboards, alerts, and data collection methods.</p></li>
</ol>
<p>There are several observability tools for RAG based systems. Frameworks like LlamaIndex also provides an easy way to integrate some of these tools with RAG application. This enable us to:</p>
<ul>
<li>View LLM prompt inputs and outputs</li>
<li>Make sure that all the components such as embedding models, LLMs and vector databases are working as expected</li>
<li>View indexing and querying traces</li>
</ul>
<p>In order to integrate observability tools with LlamaIndex, we simply need to do the following, <a href="#fig-observability-llamaindex">Figure <span>5.1</span></a>:</p>
<div id="fig-observability-llamaindex" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../Images/c8ce3d3dc576e43fa411dfeb4287215b.png" class="img-fluid figure-img" alt="General pattern for integrating observability tools into LlamaIndex" data-original-src="https://mallahyari.github.io/rag-ebook/diagrams/observability_llamaindex.png"/></p>
<figcaption class="figure-caption">Figure 5.1: General pattern for integrating observability tools into LlamaIndex</figcaption>
</figure>
</div>
<section id="weights-biases-integration-with-llamaindex" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="weights-biases-integration-with-llamaindex"><span class="header-section-number">5.1</span> Weights &amp; Biases Integration with LlamaIndex</h2>
<p><a href="https://docs.wandb.ai/">Weights &amp; Biases</a> is a machine learning platform that empowers developers to enhance their models efficiently. It provides versatile tools for experiment tracking, dataset versioning, model evaluation, result visualization, regression identification, and seamless collaboration with peers.</p>
<p>The code depicted in <a href="#fig-observability-wb-code1">Figure <span>5.2</span></a> shows how to integrate W&amp;B with LlamaIndex. For complete example, please see <a href="https://gpt-index.readthedocs.io/en/latest/examples/callbacks/WandbCallbackHandler.html">here</a>.</p>
<div id="fig-observability-wb-code1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../Images/b5552024aefc96fb6b0db38d7723a9c3.png" class="img-fluid figure-img" alt="W&amp;B integration with LlamaIndex" data-original-src="https://mallahyari.github.io/rag-ebook/diagrams/observability_wb_code1.png"/></p>
<figcaption class="figure-caption">Figure 5.2: W&amp;B integration with LlamaIndex</figcaption>
</figure>
</div>
<p>We can even see the logs as shown in <a href="#fig-observability-wb-log">Figure <span>5.3</span></a>.</p>
<div id="fig-observability-wb-log" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../Images/e7c9199aa9fe21015113e5135ac68a23.png" class="img-fluid figure-img" alt="W&amp;B logs at different steps" data-original-src="https://mallahyari.github.io/rag-ebook/diagrams/observability_wb_log.png"/></p>
<figcaption class="figure-caption">Figure 5.3: W&amp;B logs at different steps</figcaption>
</figure>
</div>
<p>If we go the W&amp;B website and login, we can see all the details, <a href="#fig-observability-wb">Figure <span>5.4</span></a> displays our project including charts, artifacts, logs, and traces.</p>
<div id="fig-observability-wb" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../Images/79e81889aeb471083da9e3b37427073f.png" class="img-fluid figure-img" alt="W&amp;B dashboard" data-original-src="https://mallahyari.github.io/rag-ebook/diagrams/observability_wb.png"/></p>
<figcaption class="figure-caption">Figure 5.4: W&amp;B dashboard</figcaption>
</figure>
</div>
</section>
<section id="phoenix-integration-with-llamaindex" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="phoenix-integration-with-llamaindex"><span class="header-section-number">5.2</span> Phoenix Integration with LlamaIndex</h2>
<p><a href="https://github.com/Arize-ai/phoenix">Phoenix</a> is an observability tool designed for LLM applications, offering insight into their inner workings. It provides a visual representation of query engine calls and highlights problematic execution spans based on factors like latency and token count, aiding in performance evaluation and optimization.</p>
<p><a href="#fig-observability-phoenix">Figure <span>5.5</span></a> shows the general usage pattern to use Phoenix.</p>
<div id="fig-observability-phoenix" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../Images/911b7e5de3d9691242f509f680c6edbd.png" class="img-fluid figure-img" alt="Phoenix integration with LlamaIndex RAG applications" data-original-src="https://mallahyari.github.io/rag-ebook/diagrams/observability_phoenix.png"/></p>
<figcaption class="figure-caption">Figure 5.5: Phoenix integration with LlamaIndex RAG applications</figcaption>
</figure>
</div>
<p>When we run queries, we can see the traces in real time in the Phoenix UI. <a href="#fig-observability-phoenix-ui">Figure <span>5.6</span></a> illustrates the Phoenix UI for a RAG application.</p>
<div id="fig-observability-phoenix-ui" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../Images/d5b908521a835fdd4a774735399680e7.png" class="img-fluid figure-img" alt="Phoenix UI that shows traces of queries in real time." data-original-src="https://mallahyari.github.io/rag-ebook/diagrams/observability_phoenix_ui.png"/></p>
<figcaption class="figure-caption">Figure 5.6: Phoenix UI that shows traces of queries in real time.</figcaption>
</figure>
</div>
<p>A complete example of tracing a LlamaIndex RAG application using Phoenix is available at this <a href="https://colab.research.google.com/github/Arize-ai/phoenix/blob/main/tutorials/tracing/llama_index_tracing_tutorial.ipynb">link</a>.</p>
</section>
<section id="honeyhive-integration-with-llamaindex" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="honeyhive-integration-with-llamaindex"><span class="header-section-number">5.3</span> HoneyHive Integration with LlamaIndex</h2>
<p><a href="https://honeyhive.ai/">HoneyHive</a> is a framework that can be used to test and evaluate, monitor and debug LLM applications. It can be seamlessly integrated as displayed in <a href="#fig-observability-honeyhive">Figure <span>5.7</span></a> into LlamaIndex applications.</p>
<div id="fig-observability-honeyhive" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../Images/cc82791ab99a0b6229d6d93ddcf40e14.png" class="img-fluid figure-img" alt="HoneyHive integration with LlamaIndex RAG applications" data-original-src="https://mallahyari.github.io/rag-ebook/diagrams/observability_honeyhive.png"/></p>
<figcaption class="figure-caption">Figure 5.7: HoneyHive integration with LlamaIndex</figcaption>
</figure>
</div>
<p>The HoneyHive dashaboard looks like <a href="#fig-observability-honeyhive-dashboard">Figure <span>5.8</span></a> below:</p>
<div id="fig-observability-honeyhive-dashboard" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../Images/b719ffe6817874e76a4abe416526155a.png" class="img-fluid figure-img" alt="HoneyHive dashboard" data-original-src="https://mallahyari.github.io/rag-ebook/diagrams/observability_honeyhive_dashboard.png"/></p>
<figcaption class="figure-caption">Figure 5.8: HoneyHive dashboard</figcaption>
</figure>
</div>
<p>For a complete guide, see this <a href="https://gpt-index.readthedocs.io/en/latest/examples/callbacks/HoneyHiveLlamaIndexTracer.html">tutorial</a>.</p>
<p>Other observability tools we can use include <a href="https://truera.com/ai-quality-education/generative-ai-and-llms/retrieval-augmented-language-models-need-an-observability-layer/">Truera</a>, <a href="https://www.databricks.com/blog/mlflow-2-7-llmops-prompt-eng-ai-gateway-updates">databricks</a>, and <a href="https://www.elastic.co/blog/transforming-observability-ai-assistant-otel-standardization-continuous-profiling-log-analytics">Elastic observability</a> among many other tools that are available.</p>
<div style="page-break-before: always;">

</div>
</section>
<section id="ending-note" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Ending Note</h1>
<p>In concluding our journey through the pages of “<strong>A Practical Approach to Retrieval Augmented Generation Systems</strong>,” we hope you have gained valuable insights into the world of Retrieval-Augmented Generation. As the landscape of AI continues to evolve, RAG systems present an exciting intersection of retrieval and generation technologies, with immense potential across a multitude of industries and applications. With each chapter, we’ve delved deeper into the core principles, strategies, and techniques that underpin the development and implementation of RAG systems.</p>
<p>Remember that the field of AI is dynamic and ever-changing. While this book has aimed to provide a comprehensive understanding of RAG, new developments and possibilities are always on the horizon. We encourage you to continue exploring, experimenting, and innovating in the realm of Retrieval-Augmented Generation. Your journey doesn’t end here; it’s just the beginning.</p>
<p>Thank you for joining us on this transformative adventure into the heart of AI’s future.</p>
<section id="acknowledgements" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="acknowledgements"><span class="header-section-number">6.1</span> Acknowledgements</h2>
<p>We would like to express our gratitude to the teams behind <a href="https://www.llamaindex.ai/">LlamaIndex</a>, <a href="https://www.langchain.com/">LangChain</a>, and <a href="https://haystack.deepset.ai/">Haystack</a> for their invaluable contributions to the field of Retrieval-Augmented Generation (RAG). Their comprehensive documentations and tutorials have been instrumental in our journey, allowing us to learn from their expertise and leverage the fascinating tools they have built.</p>


</section>
</section>

    
</body>
</html>