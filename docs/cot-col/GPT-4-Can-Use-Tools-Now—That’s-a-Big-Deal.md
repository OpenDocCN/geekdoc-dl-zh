<!--yml

类别：COT 专栏

日期：2024-05-08 11:09:30

-->

# GPT-4 现在可以使用工具了——这是一个重大事件

> 来源：[`every.to/chain-of-thought/gpt-4-can-use-tools-now-that-s-a-big-deal`](https://every.to/chain-of-thought/gpt-4-can-use-tools-now-that-s-a-big-deal)

#### 赞助商：Brilliant

本文由[Brilliant](https://brilliant.org/Every/) 提供，这是未来预防性思维的最佳途径，通过交互式课程涵盖从逻辑和数学到数据科学、编程等一切内容。

人类婴儿出生时除了一种重要的方式外完全无助：他们知道如何将自己的父母用作工具。

婴儿期的工具使用起初相当笨拙：每当出现问题时他们就大声哭泣不止：“饿了”，“尿布脏了！！！！”，“累了！！！” 等等。他们一直哭到他们的父母通过试错足够地诊断和解决问题。

然而，随着他们的年龄增长，孩子们放弃了这些粗糙的初始方法，而是使用语言来巧妙地操纵他们的父母，以越来越有针对性和精确的方式。他们不再仅仅因为看到有人吃饼干而想要一些而变得完全难以安慰，他们现在可以用精确的语言准确地表达他们想要什么：“我可以要一个饼干吗？” 父母然后可以利用他们独特的能力——行走的能力、身高差异、手部灵活性和力量——走到饼干罐子旁边，打开它，挑选一个饼干，并适当地献上作为贡品。这种工具使用是智能生物通过在世界上完成目标来克服重要限制的强大方法。

与人类孩子相比，像 GPT-4 这样的大型语言模型并没有天生知道如何使用工具来实现他们的目标。这严重限制了它们的能力。第三方库试图实现这种功能——但结果往往缓慢且不一致。

本周早些时候，OpenAI 在 GPT API 中内置了一个名为 *函数调用* 的更新，这有点像一个孩子请求父母帮助他们完成自己无法做到的任务。但在这种情况下，GPT 可以在需要时调用外部代码、数据库或其他 API。

*函数调用* 中的每个函数代表了 GPT 模型在必要时可以使用的工具，而 GPT 则决定了它想要使用哪些工具以及何时使用。这立即提升了 GPT 的能力——不是因为它现在可以完美地完成每项任务——而是因为它现在知道如何请求它想要的东西并获得它。

函数调用的工作方式如下：

当你查询一个 GPT 模型时，现在你可以连同一组工具发送给它，如果需要，模型可以使用这些工具。对于每个工具，您可以指定其能力的描述（执行数学运算、调用 SQL 数据库、发射核弹）以及 GPT 如何适当地调用每个工具的说明。根据查询，GPT 可以选择直接回答，也可以请求使用工具。如果 GPT 返回一个使用工具的请求，您的代码将调用该工具，并将结果发送回 GPT 以进一步处理，如果有必要的话。

工具使用非常重要，因为，就像一个四岁的孩子一样，目前的 GPT 模型有一些明显的局限性：它们在数学上很糟糕，它们无法访问私人数据，它们对 2021 年之后的任何事情都不了解，它们无法使用 API 等等。为了解决这些问题，OpenAI 利用了 GPT 的推理能力，让其自行决定何时使用工具来帮助它解决可能对它而言困难的查询。

这对两个重要原因很重要：

1.  它使 GPT 模型显著更加强大

1.  它取代了一些执行相同功能的开源库的功能

**投资于你的人类智慧**

随着技术以光速发展，持续学习对于保持领先至关重要。这就是[Brilliant](https://brilliant.org/Every/)的用武之地。

[Brilliant](https://brilliant.org/Every/)是提升解决问题能力、掌握数学、数据和计算机科学复杂概念的最佳方式，每天只需几分钟。引人入胜的小课程使您能够养成每日学习的习惯，同时提升人工智能、数据科学等方面的能力。

试用[Brilliant](https://brilliant.org/Every/)30 天免费，而且还可以为新闻通讯读者获得年度高级会员资格 8 折优惠。

## GPT 的工具使用者 > GPT

鉴于目前关于人工智能的所有炒作，如果你忘记了传统软件实际上非常强大，你可以原谅。目前，这种力量大部分与 GPT 模型隔绝开来，因为将两者整合起来相当困难。如果你能做到这一点，那么它将成为人工智能现有能力的增强器。这就是*函数调用*非常令人兴奋的原因。

突然之间，为 GPT 模型提供检查天气、获取股价、查找公司数据库中的数据或发送电子邮件变得更加容易。它现在可以使用 Twilio 发送短信，或在 Zapier 中初始化 zap，或通过 NASA 的 API[跟踪近地小行星的位置](https://api.nasa.gov/)。作为程序员，您所需做的就是将这些能力作为工具提供给 GPT（这相当简单）。然后，GPT 将智能地决定使用它们来完成您给定的任务。

这不仅对 GPT 的一次性调用有用。对于过去几个月里最受瞩目的 LLM 用例之一也非常有用：运行代理。

代理是一种语言模型，它被赋予了一个任务，比如“研究和总结关于不明飞行物的新闻”，以及一套工具，比如谷歌搜索工具和 Twitter 搜索工具。然后，语言模型会循环运行直到完成其目标。首先，它规划一组步骤，然后使用工具帮助它实现自己设定的每个任务。

以前，代理必须通过大量自定义代码或使用开源库（比如 [Langchain](https://python.langchain.com/en/latest/)）来拼凑在一起。Langchain 在后端做了一些花哨的工作来让 GPT 使用工具，但这种工作方式，用技术术语来说，*非常不稳定*。根据我的经验，它速度非常慢，并且会经常出故障，因为 GPT 会偏离轨道。为了使工具使用起作用，Langchain 需要模型以非常特定的格式返回其工具选择，以便可以将其传递给您周围的代码以执行。从历史上看，GPT 在遵循这种工作所需的精确格式说明方面表现非常糟糕——因此代理实现是不可靠的。

OpenAI 似乎已经通过 *函数调用* 发布解决了这些问题。简单的代理可以很容易地构建，它们的工作速度会快得多，并且它们的故障率会比上一代低得多。这意味着更多的 LLM 使用案例可以用更少的代码实现更强大的功能。这对于开发者来说是一个巨大的胜利。

但这对于开源库来说必然是令人沮丧的事情。

## 在基础设施层上构建就像在沙子上建房。

五月份，我开设了一个名为 [如何构建 AI 聊天机器人](https://www.chatbot-course.com/) 的基于同学小组的课程。其中一个讲座完全是关于如何在 Langchain 中构建代理的。我非常努力地解释细节，完善幻灯片，并为学生编写了代码示例。但现在，所有这些工作都被这个版本完全淘汰了。

如果我对此感到沮丧，我相信 Langchain 也是如此。他们在让开发者社区获得语言模型发展的最前沿方面做得非常出色。每当一位学者发布论文，或者一个黑客构建一个演示如何让 LLM 完成一些新奇的事情——比如创建代理——Langchain 就会实现它，然后突然间每个人都能做到。

现在，用于启用代理功能的许多代码已经在 GPT-4 内部原生实现。这并不意味着 Langchain 不再需要，事实上，[您已经可以在 Langchain 中使用 *函数调用* 功能](https://twitter.com/hwchase17/status/1668682373767020545)而不是使用他们以前的代理架构。但这意味着他们为构建这些先前架构所做的所有工作在某种程度上现在是不必要的和过时的。

这给任何在基础设施层构建的公司提出了重大问题：你创造的任何东西都可能在很短的时间内被新的 OpenAI 功能发布所消灭或废除。所以你有两个选择：尝试构建 OpenAI 不会构建的东西，或者在 OpenAI 之前不断地推进，并不断在 OpenAI 之前的时间窗口内实现新的想法。

这是一场艰难的游戏，我很好奇像 Langchain 这样的图书馆是如何处理的。他们的一个优势是，许多开发人员习惯于仅通过 Langchain 而不是直接使用 OpenAI API。只要 Langchain 继续迅速实现 OpenAI 提供的新功能，这些开发人员可能不会转向基础 API，并且这似乎正是他们正在做的事情。

## 总结

让我们回到人类孩子身上一秒钟（你知道我不得不这样做）。观察他们长大的最酷的部分之一是，他们在功能上似乎在一夜之间就得到了升级。从一天到另一天，他们学会了微笑，或者他们学会了爬行，或者他们可以给你一个小手挥动。这些构建块中的每一个都扩展了他们的表演，直到他们成为行走、说话、情绪化的十几岁孩子，讨厌你。

使用语言模型进行构建有点像那样。每隔几周或几个月，我们都会得到一个完全改变其功能的升级，也会改变竞争环境。这是那些突如其来的转变之一，它将极大地简化快速构建复杂 LLM 功能。这也意味着现在有相当大比例的代码是不必要或过时的。

这是一个有趣的时刻，也是一个令人沮丧的时刻，这取决于你所处的位置。
