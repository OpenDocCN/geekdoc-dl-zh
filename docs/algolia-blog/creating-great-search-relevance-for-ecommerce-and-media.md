# 为内容丰富的电子商务和媒体创建搜索相关性

> 原文：<https://www.algolia.com/blog/product/creating-great-search-relevance-for-ecommerce-and-media/>

我们继续我们的搜索相关性系列。我们的第一篇文章 [定义了相关性](https://www.algolia.com/blog/product/what-is-search-relevance-in-the-era-of-browsing-discovery-and-recommendations/) ，描述了一个 **相关性循环** ，该循环从 *搜索* (即查找和订购项目)开始，并继续高级 *浏览* 和 *发现* 策略，如商品销售、内容管理、个性化

在本文中，我们主要关注循环的第一部分，搜索。我们浏览了一些真实的例子，并搜索了创建生产级相关性的配置策略。我们分解并优化搜索相关性的两大支柱:

*   **文本相关性**–*查找与查询匹配的* 项
*   **排名**–*排序* 所找到的商品中哪些 商品最符合查询

首先，我们将展示这些支柱在很大程度上取决于您如何 **构建和配置您的数据** 。为了说明这一点，我们将描述一些基础知识: **可搜索属性** 、 **分面** 和 **自定义排名**——这些术语我们将在后面定义。

我们将讨论重要的配置，如 **同义词** 、 **语言** 、 **错别字设置** 。最后，我们将展示 **分析** 和 **的重要性，测试您最重要的查询** 以查看它们是否返回所需的搜索结果。

## [](#matching-words-to-content)匹配单词到内容

我们说的“相关性”，往往是指“ *文本* 相关性”，是指搜索引擎如何将一个查询的词与你的底层数据(搜索索引)进行比较，返回匹配结果。

有两个相关的问题要问:

*   内容中的条目与查询中的词匹配吗？
*   如果是，这是一场强有力的比赛还是弱有力的比赛？ *最佳* 匹配是 *最强* 匹配。

为了说明我们所说的找到弱匹配和强匹配是什么意思，想象一个使用最简单的相关性形式的搜索，即 *逐字母比较* 。

这里有四个著名的引语(我们已经在[第一部分](https://www.algolia.com/blog/product/what-is-search-relevance-in-the-era-of-browsing-discovery-and-recommendations/)中讨论过了，但角度略有不同)

1.  “要**还是不要: **那** 就是这个问题了”(作者威廉·莎士比亚)**
***   “那是 **成为** 的第一个时代，那是最坏的时代”(作者查尔斯·狄更斯)*   “不要问你的国家能为你做什么——问你能为你的国家做什么”(美国总统约翰·肯尼迪)*   “很长一段时间我习惯去 **做**【d 早】(作者马赛尔·普鲁斯特)**

 **文本匹配可以是精确的，也可以是部分的。搜索"**be**"匹配 3 条记录的文本:记录 1 (" **be** ")，记录 2 (" **be** st ")，记录 4 (" **be** d)。在本例中，记录 1 是最强的，因为它是完全匹配的，而记录 2 和 4 较弱，因为它们只是部分匹配。

继续这个例子，如果我们允许 1 个单词的错别字，那么搜索“ **that** ”将找到记录 1 和 3，其中记录 1(“**that**”)比记录 3(“**w**hat”)强，这与查询相差 1 个字母。

## [](#matching-intent)匹配 *意图*

如果只是这么简单的话……事实是，搜索人员的要求远不止这些。搜索不仅仅是匹配文本。他们希望他们的结果感觉直观。这里有一些额外的问题要问:

*   我应该以什么顺序显示这些记录？
*   “最好”这个词应该回归什么？只记录 2(**最好** 的次数)？但是，如果用户一直在寻找“最佳”的 *创意*=比如，最佳报价，会怎么样呢？
*   创造一个“最好”的同义词，比如“最伟大”怎么样？

*   查询“question”(“question”输入错误)应该返回记录 1 吗？
*   如果有人只寻找“文学名言”(记录 1，2，4)呢？
*   如果我只想查找从法语翻译过来的引文(记录 4)，该怎么办？

为了帮助实现这一点，我们需要考虑内容/数据的质量以及如何最好地配置它。

内容，或 **数据** ，需要包含更多的细节。这里有一个更新的数据集:

1.  《生存还是毁灭:这是个问题》，莎士比亚，英国，哈姆雷特，戏剧，引文
2.  《这是最好的时代，这是最坏的时代》，狄更斯，英国，《双城记》，小说
3.  “不要问你的国家要求你什么——问你能为你的国家做些什么”，肯尼迪，美国，演讲，政治
4.  “很长一段时间我习惯早睡”，普鲁斯特，法语，寻找逝去的时光/ a la recherche du temps perdu，小说

有了这么多数据，还有一步:引擎需要 **配置** 。我们会添加一些同义词。同义词不是数据的一部分，而是引擎设置的一部分。让我们加上“最好=最伟大”。我们还将配置引擎来匹配单数和复数形式(book = books ),并告诉它容忍打字错误和拼写错误。正如我们稍后将讨论的那样，还可以进行其他配置。

## [](#rolling-up-our-sleeves-%e2%80%93-let%e2%80%99s-create-an-optimized-set-of-searchable-data)卷起袖子，让我们创建一组优化的可搜索数据

上面的引文被用来说明我们所说的相关性。现在让我们来看一个典型的媒体/电子商务例子:一系列书籍(用于购买或流媒体播放)。

在这里，我们可以设想书的信息(即属性)如下:

*   标题
*   描述
*   作者
*   流派
*   封面图片
*   人气

要搜索，我们不需要使用“封面图片”、“价格”或“人气”。我们现在也将忽略“描述”。其他字段(“标题”、“作者”、“流派”)将用于查找图书。这种只选择部分属性的过程有助于引擎聚焦于 [*可搜索*属性](https://www.algolia.com/doc/guides/managing-results/must-do/searchable-attributes/) ，使你的信息更加精确，保证相关搜索结果。

*   **标题(可搜索)**
*   描述
*   **作者(可搜索)**
*   **流派(可搜索)**
*   价格
*   封面图片
*   人气

其他字段用于其他目的。例如，用于在搜索结果中显示(“价格”、“图像”)和按(“人气”、“价格”)排序。

## [](#ordering-by-relevance-known-as-ranking)按相关性排序，称为排名

*排序* 对你的可搜索信息同样重要。我们称之为相关性排名。例如，如果您键入“king”来查找斯蒂芬·金写的书籍，您可能会在看到斯蒂芬·金书籍之前看到“标题”中带有“King”一词的书籍。要解决这个问题，你需要将你的属性按以下顺序排列(例如，“作者”在“标题”之上，让搜索引擎首先搜索作者):

*   **作者**
*   **标题**
*   **流派**
*   描述
*   价格
*   封面图片
*   人气

还可以在顶部加上“流派”，这样《王者恐怖》会保证有好的效果。

*   **流派**
*   **标题**
*   **作者**
*   描述
*   价格
*   封面图片
*   人气

这里的要点是你可以选择搜索内容的优先级。这是一项重要的业务定制，是每个书商的独特选择。

为了提高匹配度，我们添加“描述”作为后备。然而，我们需要小心。像“描述”这样的长属性可能会产生噪音，并在相关性方面产生误报。这样的属性通常包含太多的简单匹配。在这种情况下，您可以创建一个“简短描述”属性，该属性从“描述”中提取关键字的子集。

*   **流派**
*   **标题**
*   **作者**
*   **简短描述**
*   价格
*   封面图片
*   人气

最后，让我们确保可以在字段的开头或中间搜索“标题”、“作者”和“简短描述”。这使得寻找“和平”能够找到“战争与和平”，即使“和平”不是标题中的第一个词。这对每个属性都不好，比如“流派”。我们用一个特殊的词“ **(无序)** ”来完成这一点。

*   **流派**
*   **标题(无序)**
*   **作者(无序)**
*   **简短描述(未订购)**
*   价格
*   封面图片
*   人气

## [](#creating-order-with-custom-ranking)用自定义排名创建订单

这里我们重点关注属性“人气”。我们只需要告诉引擎使用“流行度”来帮助排序记录。

*   流派
*   标题(未排序)
*   作者(无序)
*   简短描述(未订购)
*   价格
*   封面图片
*   **人气**

这个 [*自定义*排名](https://www.algolia.com/doc/guides/managing-results/must-do/custom-ranking/)的想法需要一些上下文。当用户搜索“king”时，所有在可搜索属性中包含单词“king”的记录都会显示出来。将“作者”作为一个字段当然会确保这一点(关于斯蒂芬·金)。


问题是:斯蒂芬·金的哪本书应该排在榜首？哪一秒？这就是受欢迎的原因。没有办法知道先显示哪个，因为它们都匹配得一样好，所以我们可以按受欢迎程度排序。我们也可以订购最新的版本。

现在，如果有一个你想让你的用户知道的未知作者呢？您可以添加另一个自定义属性，如 promote-book(真或假),或者一个评分系统(1 到 5，1 对向用户显示非常重要)。其他自定义排名属性:最高利润或最流行。或者两种或多种属性的组合。

我们将这一过程描述为平局决胜，我们比较匹配项，将最强的匹配项放在顶部，较弱的匹配项放在较低的位置。例如，如果有人键入“ki”，与“ki”完全匹配的作者(例如，*【Ki Lynn】*)将比仅部分匹配的作者显示得更高。但如果用户加上“ng”，使其成为“王”，Ki Lynn 下降(作为 精确匹配中的 *)而 Stephen King 上升到顶部。此外，由于流行度是一个自定义排名，斯蒂芬·金很可能会填满搜索结果的前 10 页。(有办法避免这最后一个事实——一个受欢迎的作者可以在搜索结果中独占鳌头。例如，您可以将斯蒂芬·金限制为只有 3 个结果。)*

## [](#optimizing-relevance-even-further-with-synonyms-typo-tolerance-filters-analytics)利用同义词、错别字容差、过滤器、分析进一步优化相关性

现在你的数据可以搜索了，排名也合适了。搜索引擎不需要知道更多关于你的数据。您已经构建了它，并通过指定如何搜索赋予了它意义。我们可以做更多的事情来管理某些特定的情况，但是我们所做的事情在很大程度上已经足够了。但是我们可以更进一步，创建同义词和方面(即过滤器)。

### [](#adding-synonyms)**添加同义词**

每个顾客都有一套独特的词，可以通过创造 [同义词](https://www.algolia.com/doc/guides/managing-results/optimize-search-results/adding-synonyms/) 来满足。就书而言，有一个词“小说”是“书”的同义词。有剧院和戏剧，有作者和作家，还有诸如“椅子”和“座位”，或“裤子”、“宽松裤”和“裤子”等世俗的同义词。很多相关的同义词可以来源于一本字典，但其他的则非常具体到一个行业或一家公司。他们也可以 [AI-power 你的同义词](https://www.algolia.com/doc/guides/algolia-ai/dynamic-synonym-suggestions/) 。

### [](#adding-filters)**添加滤镜**

已经提到过，对于书籍，添加“流派”和“作者”这样的属性有助于用户根据这些和其他过滤器挖掘和挑选出书籍。 [滤镜](https://www.algolia.com/doc/guides/managing-results/refine-results/filtering/) 可以在后台工作，也可以放在屏幕上作为 [面](https://www.algolia.com/doc/guides/managing-results/refine-results/faceting/) 。

**错别字&拼写错误**

你的搜索引擎应该能够找到只有一两个字母不同的单词。然而，打错“shakspear”应该找到“shakespear”。这叫做[](https://www.algolia.com/doc/guides/managing-results/optimize-search-results/typo-tolerance/)。

### [](#language-settings)**语言设置**

将您搜索解决方案的 [语言](https://www.algolia.com/doc/guides/managing-results/optimize-search-results/handling-natural-languages-nlp/) 设置为您用户的母语。如果你只卖英文书，你需要告诉搜索引擎你的用户将用英语打字。然后，搜索引擎可以应用特定于语言的逻辑(例如确定复数或单词分离)。但是，如果您的读者也是法国人，您可能希望开始向数据中添加法语文本，或者创建一组不同的数据—一个英语，另一个法语..

你会希望搜索引擎区分单数和复数，不要被“the”、“what”和“And”这样的“stop”词所困扰。

### [](#analytics-and-testing)**分析和测试**

最后， [分析学](https://www.algolia.com/doc/guides/getting-analytics/search-analytics/out-of-the-box-analytics/) 。您希望跟踪输入最多的前 10 个查询。然后，测试这 10 大查询和其他分析指标，看看您对结果是否满意。还有，避免提供 [没有结果](https://www.algolia.com/doc/guides/managing-results/optimize-search-results/empty-or-insufficient-results/) 。查看您的热门搜索是没有返回结果，还是只返回少量结果。并跟踪 [用户点击量和](https://www.algolia.com/doc/guides/getting-analytics/search-analytics/advanced-analytics/) 。

最后，用你所有的 [分析报告](https://www.algolia.com/doc/guides/getting-analytics/search-analytics/understand-reports/) ，以及 [AB 测试](https://www.algolia.com/doc/guides/ab-testing/what-is-ab-testing/) ，来分析提升你的搜索性能。

## [](#conclusion-going-beyond-search)结论——超越搜索

匹配文本是一个关键的起点。为此，您需要预测用户的查询和表达方式，然后组织数据以匹配最常见的查询词。正如我们所见，简单的文本匹配并不能解决所有问题。您还需要过滤、排名、属性优先级、处理错别字、同义词和其他基于语言的特征等功能，以便让搜索引擎能够从字里行间读出意思。下一步是超越搜索 的 [，看看你如何能够](https://www.algolia.com/blog/ecommerce/advanced-search-experience-for-e-commerce/) [深化你与个性化](https://www.algolia.com/blog/ecommerce/the-guide-to-e-commerce-merchandising/) 的关联，销售，浏览，发现和推荐。**