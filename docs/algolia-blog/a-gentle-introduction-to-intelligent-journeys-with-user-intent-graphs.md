# 用用户意图图创建智能旅程的温和介绍

> 原文：<https://www.algolia.com/blog/ai/a-gentle-introduction-to-intelligent-journeys-with-user-intent-graphs/>

传统上，我们将用户意图与搜索引擎如何理解用户的需求和愿望联系起来。但随着网络变得越来越复杂，理解用户意图已经成为设计个性化用户旅程的关键挑战，甚至超越了搜索。

啊，个性化——客户体验的圣杯！每个人都在谈论它，很少有人真正知道如何正确地做它。这有一个很好的理由:个性化不是一个勾选框练习。这是一项复杂的任务，因为每个用户都是独一无二的，需要尊重他们的隐私，同时还要提供个性化的体验。

因此，通过将用户的行为和选择绘制为图上的点，将用户意图表示为数学抽象，使我们能够在保持(某种程度上)匿名的同时可视化用户的独特性。

现在，关系数据自然地由称为实体的*网络的图来表示，这有助于我们查看和分析数据点之间的关系。这些图可以应用于解决许多现实世界的问题，例如优化不同位置之间的导航以及构建推荐引擎、社交图和知识图。*

一般来说，只要数据表示其实体之间的交互，就可以用图表表示。例如，隐式社交媒体关系可以被认为是一个统一的图形 [](https://deepai.org/publication/graph-neural-networks-for-recommender-systems-challenges-methods-and-directions) ，节点代表用户、页面、位置、群组、评论、照片、相册、故事、视频、笔记和事件等实体。该图表示这些节点如何相互交互，例如，用户发布照片、视频或评论；用户用他们的出生地更新他们的简档；喜欢朋友照片的用户。

然而，在我们试图用图形表示用户意图之前，让我们提供一个更正式的描述来说明我们所说的“*图形数据*”的含义，不要进入大量的数学细节，只需要对图形有一个直观的理解就够了。

# 图表原理

形式上，图是由一组节点 V 和这些节点之间的一组边 E 定义的。我们表示从一个节点(A)到另一个节点(B)的边。在许多情况下，我们将只关心简单的图，其中每对节点之间至多有一条边，一个节点与其自身之间没有边，并且所有的边都是无向的。

Directed vs. Undirected Graphs

表示图的一种便捷方式是通过邻接矩阵 [](https://cs.mcgill.ca/~wlh/comp766/files/chapter1_draft_mar29.pdf) 。为此，让我们考虑电子商务场景中用户(U)和产品(P)之间的关系；我们可以将边的存在表示为该矩阵中的条目:

Users (U) and Products (P) adjacency matrix

当然，一些图也可以有加权边，其中邻接矩阵中的条目是任意的实数值而不是{0，1}。此外，图可以有不同类型的边。例如，在我们的电子商务场景中，用户和产品之间的交互可以采取多种形式:*点击、添加到购物车、添加到愿望清单或购买。*

我们已经可以看到我们的示例图有两种类型的节点:*用户*和*产品*。这些被称为二分异构图。多部分图是异构图的一个众所周知的特例，其中边只能连接具有不同类型的节点，即添加*类别作为*新类型的节点 [](https://www.morganclaypoolpublishers.com/catalog_Orig/samples/9781681739649_sample.pdf) 。

Users, products, and categories graph

最后，在许多情况下，我们还有与图形相关的属性或特征信息(例如，与产品相关的图片)。最常见的是使用向量或矩阵表示的节点级属性；在异构图中，通常每个不同类型的节点都有自己独特的属性类型。在某些情况下，除了离散边类型之外，图还被设计为支持实值边特征，并且在极少数情况下，实值特征与整个图相关联。

近年来，*图神经网络*由于其在建模节点间依赖关系方面的能力和灵活性，在各个领域中获得了普及。主要有三种类型的问题可以通过使用带有图形的机器学习来解决:

**1。节点分类**

节点分类对于根据节点与图中其他节点的关系来推断节点信息非常有用。假设我们有一个大型数据集，包含市场上正在商业化的数百万种产品，我们知道这些产品中有相当一部分是假冒的。识别这些假冒产品对于不想推销假冒产品的公司(更不用说“销售”这些产品的用户违反了条款和服务的事实)和将冒着订购(并支付)可能永远不会到达目的地的产品的风险的买家来说都很重要。

手动检查用户发布的每一个产品是很昂贵的。因此，拥有一个可以将产品分类为假冒(或不假冒)的模型似乎是一个优雅、更具成本效益的解决方案。

这是一个经典的节点分类示例，目标是预测与每个标注相关的标签，可以是类型、类别或属性[⁴](https://alessandro-negro.medium.com/is-a-knowledge-graph-capable-of-capturing-human-knowledge-8521162f06b2)——即使训练集只给我们节点上的真实标签。节点分类可能是图形数据上最流行的机器学习任务，尤其是在最近几年。

**2。关系推理**

与节点分类一样，关系推理是更受欢迎的图形数据机器学习任务之一，并有无数的现实世界应用:电子商务场景中的产品推荐，预测药物副作用，或在关系数据库中推断新事实。所有这些任务都可以被视为关系预测的特例。

关系推断的标准设置是给定一组节点 V 和这些节点之间的一组不完整的边，目标是使用这些部分信息来推断缺失的边。在简单的图中，例如仅编码“*购买*关系的推荐系统，有基于两个节点共享多少邻居的简单试探法可以实现强性能。另一方面，在更复杂的多关系图数据集中，例如编码数百种不同生物相互作用的生物医学知识图，关系预测可能需要复杂的推理和推断策略。

**3。聚类**

而节点分类和关系预测需要推断关于图形数据的缺失信息，从而使它们在许多方面类似于监督学习；相反，聚类检测更类似于无监督聚类。

同样，在我们的电子商务场景中，假设我们有一个用户配置文件数据库，我们制作一个协作图，连接两个表达相似偏好的用户配置文件。如果我们检查它，我们会注意到该图分成不同的节点群，按产品相似性、订单总值或其他类似的人口统计因素分组。

图聚类中的一般直觉是将更有可能与属于同一聚类的节点形成边的节点表面化。

# 用户意图图

在对图论的简短介绍之后，我们准备构建我们的用户意图图。在描述节点之间的关系之前，我们首先需要定义节点。乍一看，对于电子商务推荐系统来说，将节点表示为用户和产品，将边表示为交互是非常简单的——正如我们在上面的图表中看到的。

但是我们如何定义意图，如何在我们的图表中表现出来呢？

如果一个用户访问了 3 个产品，我们能知道她的意图是什么？或者，如果同一个用户将一件商品添加到购物车中，我们是否更清楚她的意图？如果她没有完成订单，而是访问了“联系我们”页面，会怎么样？

用户意图被定义为用户一系列动作 [⁵](https://www.semrush.com/blog/how-to-use-search-intent-for-your-business/) 的目的。营销人员传统上一直使用一套标准的意图，主要受谷歌搜索算法的启发:

*   **导航** —用户想要找到一个特定的页面或网站(品牌关键词)
*   **信息** —用户想要回答一个特定的问题(包括“如何做”、“是什么”、“在哪里”、“为什么做”的查询)
*   **事务性** —用户想要完成一个动作(转换、注册、电话)

显然，一个有*导航*意图的用户对他们的登陆页面的期望会与一个有*交易*思维的用户有很大不同。因此需要个性化。

因此，我们的图的复杂性与我们定义用户、项目和意图的方式联系在一起:如果我们考虑有限数量的意图类(*导航类、信息类、事务类*)，那么我们的图看起来会非常干净。然而，如果一个意向可以根据他们在任何给定时间积极参与的行业的具体情况以及项目本身的特征来取多个值，那么情况就会变得更加模糊。

A user intents graph

这就是为什么，对于电子商务旅程，我们可能会考虑以下类型的意图:(1)面向目标的意图；(2)亲和倾向；(3)面向度量的意图。值得注意的是，我们希望用户表现出多种意图，而不仅仅是一种主导意图。

Example of user intents: goals, affinities and metrics

为了开始表示我们的用户意图图，我们可以想象每个用户(U)都链接到他们的会话(S ),并且在每个会话期间，用户都与产品(P)交互，每个产品都有自己的属性(A)。

A representation of a user intent graph: user-sessions-products-attributes

用户可以在他们的会话中做某些不一定与特定项目相关的事件:注册、搅拌或浏览。而其他链接到商品和购物车:放弃购物车、添加到购物车和结帐。

A representation of a user intent graph: user-sessions-products-attributes and events

用户也可以搜索，在这种情况下，有链接到项目和项目类别的常见查询。

A representation of a user intent graph: user-sessions-products-attributes, events and search queries

尽管用户意图图已经变得如此复杂，我们可以将它"*"压缩成下图:*

 *A representation of the compressed user intent graph

在 REST API 格式中，您会期望类似于[*/1/users/{ identifier }/fetch*](https://gist.github.com/cborodescu/a971888ae115b378f755b1e74869f890)的响应:

在实践中，您希望能够探索用户意图图，并根据任何给定的意图组合轻松提取用户:

```
intents.cart_abandonment.probability: 0.5 TO 0.9 
AND intents.next_order_value.value >= 50 
AND intents.affinities.brand.value = “adidas” 
AND intents.affinities.brand.probability > 0.5

```

# 应用程序

让我们简单谈谈用户意图图让我们能够构建的应用类型。我们已经通过引用个性化开始了这篇文章，但是我们能根据意图个性化什么呢？

**1。搜索**

对于拥有几乎无限的产品数据库的电子商务网站来说，个性化对于他们的最终用户来说是一项非常重要的能力。如果我们的用户意图图配备了用户亲和力，那么个性化搜索结果就变得非常简单。

**2。建议**

类似地，我们可以使用*下一个订单价值*意图作为过滤器，显示用户当前正在浏览的类别中的产品，或者作为购物车中的追加销售机会，匹配用户的购买力。

**3。旅程**

最后但同样重要的是，我们可以超越现场搜索，根据用户的意图推荐、调整或编排用户旅程。如果我们的用户对购买我们的任何商品都不感兴趣，他们只是随便逛逛，那该怎么办？

为什么不鼓励他们订阅时事通讯，或者注册博客，关注社交媒体等等。？有时候，对用户来说最好的事情不是添加到购物车，而是在决定购买之前阅读更多关于某个产品或服务的信息，这可能会在以后的会话中出现。

帮助用户和个性化她的旅程可以通过用户意图图来实现，用户意图图能够显示用户为了达到某个目标应该采取的下一个最佳行动。例如，如果我们的用户更有可能订阅时事通讯，而不是加入购物车，你认为正确的行动呼吁应该是什么？*