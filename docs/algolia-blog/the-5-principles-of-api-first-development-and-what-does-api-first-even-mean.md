# 构建真正无头产品的 API 优先开发的 5 个原则

> 原文：<https://www.algolia.com/blog/product/the-5-principles-of-api-first-development-and-what-does-api-first-even-mean/>

在我们谈论 API 优先开发之前，我们需要了解什么是 API。

> *应用编程接口(API)是一种允许两个应用程序交换数据和功能的技术。*

假设你有一个电子商务网站，想集成 Algolia 的搜索功能。我们的搜索 API 让您的网站和我们的托管搜索引擎交换数据和功能。当用户输入一个查询时，你的网站向我们的服务器发送一个请求，我们的服务器发回响应——所有这些都是通过 API 完成的。这种 API 请求-响应交换是开发人员如何交付出色的搜索和发现体验 *而无需* 从头构建技术。

API 就在你身边——即使你看不到它们。谷歌通过其地图平台 API 分享其地图、导航和本地数据。OpenWeatherMap 向应用程序和网站提供超本地每分钟的降雨数据。脸书允许移动开发者整合社交关系和个人资料信息。这样的例子不胜枚举。

那是一个 API，但是什么是 **API 优先** 的开发方法呢？

> API 优先是一种以 API 为中心的软件设计方法。应该可以通过脚本语言执行每一个动作，并且每一项功能都应该可供其他系统利用。

同样，如果这听起来很简单，那是因为它很简单。然而，问题出现了，因为定义变得模糊了。通常，当开发人员说他们是 API 优先时，他们只意味着 API 是重要的，而不是基础性的。

## [](#the-core-principles-of-api-first-development)API 的核心原则——优先开发

由于如此多的开发人员不正确地使用术语 API 优先(或者可能部分正确)，很难知道哪些产品是真正的 API 优先，哪些不是。

正是因为这个模糊的定义，我们收集了 API 优先开发方法的五个核心原则。

### [](#1-your-api-is-a-product)1。你的 API 是一个产品

发布一个 API 很容易。难的是让它为大众消费做准备。这就是仅仅创建 API 和把它们当作产品的区别。API 优先的方法要求您考虑开发人员将如何与您的 API 交互，您将如何教育他们 API 的功能，您将如何维护它，使用哪些工具来构建 API，以及您将如何遵守兼容性、安全性和简单性的标准。

一个公司打造一个产品，必须符合行业标准。对于 API，这意味着实践交付高质量软件产品的基础软件设计和开发周期。产品开发包括前期设计和规范、对等编程、符合 API 目标的技术选择和编程语言支持、云与现场之间的决策、测试和用户研究。

### [](#2-foundational-design-not-ad-hoc-retrofit)2。基础设计，而非特别改造

API 优先设计要求开发者从一开始就考虑 API。然而，很少有人能从头开始工作。通常，软件公司会在 构建产品之后，尝试采用 API 优先的方法 *。通常，这意味着在现有平台上添加 API。这种方法并非没有价值。它可以提高自动化程度并改进底层功能。但是它不是 API 优先的方法。*

简单来说，API 优先开发是以 API 为基础的。它不是预先构建的或自以为是的软件解决方案或体验，而是确保您可以通过 API 访问平台的所有功能。

### [](#3-team-collaboration-and-impact)3。团队协作和影响

当处理技术主题时，很容易只关注技术。但是 API 优先开发不仅仅是技术标准。这是一种工作和协作的方式。API 优先的方法不仅仅关注每个 API 的细节，而是更多地关注围绕这些 API 的团队和操作。

实现 API 优先的环境需要产品经理的强有力的领导，他既了解 API，又具备足够的技术技能。它也需要熟练的开发人员。尽管开发人员非常擅长交付出色的最终用户体验，但创造令人愉快的 *工程* (或开发人员)体验(DX)完全是一套不同的技能。您需要一个客户成功功能来帮助实施和支持现场正在进行的查询和用户反馈。

### [](#4-api-first-supports-microservices)4。API-first 支持微服务

开发世界正朝着可重用性的方向发展。正如汽车制造商使用通用部件一样，公司正在从一体化平台转向可重复使用的组件。

例如，在线零售商不再购买一体化的电子商务平台，而是采购所有最好的可重复使用的组件(库存管理、结账、支付网关、订单履行等)，并将它们结合起来，创建完全适合其环境的企业产品。

因为你的组件需要相互通信，所以没有 API 就没有微服务。使用 API 优先的方法进行构建，可以确保其他开发人员可以轻松地将您的 API 集成到他们的微服务架构和应用中。

### [](#5-the-api-contract)5。API 合同

我们已经提到，API 优先的方法是由可重用性驱动的。通过创建开放和可访问的 API，公司可以轻松地重用、重新部署和共享功能。但是说起来容易做起来难。提高可重用性的一种方法是通过一致的 API 描述语言。具体来说，这创建了一个约定，规定了 API 应该如何表现。建立契约需要花费更多的时间来考虑 API 的设计，并且经常需要额外的计划和协作。

## [](#where-does-api-first-fit-into-the-mach-alliance-principles)API-first 符合 MACH 联盟的原则吗？

到目前为止，我们已经讨论了 API 和 API 优先开发。但两者都不是孤立存在的。它们位于一个更大的技术生态系统中。这就是为什么你经常听到 API-first 和另外两个概念: [Jamstack 架构](https://www.gridhaus.com/blog/jamstack-modern-web-architecture-in-digestible-terms)和 [MACH 联盟原则](https://www.sitecore.com/blog/headless/what-is-mach-architecture)。

例如，jam stack(Javascript、API 和标记)是构建现代产品的最佳实践的集合。它是关于分离 web UI 层和后端业务逻辑的。正是这种运动使得马赫方法成为可能。

但是什么是 MACH 联盟，API-first 在哪里？要回答这个问题，缩小范围问“谁是马赫联盟”是有帮助的

马赫联盟(MACH Alliance)是一个由独立科技公司组成的团体，倡导开放、一流的科技生态系统。像许多人一样，他们认为企业套件已经过时，并建议用“敏捷、灵活、始终保持最新”的 MACH 生态系统来取代它们。

为了创造这样的生态系统，他们建议公司遵循四个原则:

*   **微服务** :独立开发、部署和管理的单个业务功能。
*   **API-First** :所有功能都通过一个 API 公开。
*   **云原生** :利用存储和托管之外的云的 SaaS，包括弹性扩展和自动更新。
*   **无头** :前端表示与后端逻辑和通道、编程语言解耦，最终是框架不可知的。

如你所见，API 优先开发是 MACH 生态系统的基石，也是企业技术的未来。这就是为什么当我们来构建[Algolia](https://www.algolia.com/)时，我们遵循 MACH 原则，基于微服务、API 优先设计、云和无头架构来构建产品。像联盟的其他成员一样——big commerce、Contentful、MongoDB 和 AWS 等——我们正在证明为什么这种方法如此有影响力。

## [](#going-api-first-isn%e2%80%99t-easy-%e2%80%94-but-it%e2%80%99s-worth-it)将 API 放在首位并不容易，但这是值得的

我们已经解开了什么是 API 优先开发，并探索了随之而来的一些优势。但我们也强调了这是一个多么根本性的变化。转向 API 优先的开发并不像按动开关那样简单。你需要重新思考和评估你的产品设计和架构的整个方法。

面对如此重大的变化，公司半途而废或实施零敲碎打的方法并不奇怪。这就是为什么技术领导者需要睁大眼睛开始 API 优先的转变。当你这样做的时候，你就拥有了最大的成功机会，并且释放了 API 优先开发的所有好处。