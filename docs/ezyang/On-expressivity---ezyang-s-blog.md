<!--yml

category: 未分类

date: 2024-07-01 18:17:56

-->

# 关于表达力：ezyang 的博客

> 来源：[`blog.ezyang.com/2011/03/on-expressivity/`](http://blog.ezyang.com/2011/03/on-expressivity/)

*在这篇文章中，我要取笑函数式编程的倡导者。*

在这篇文章中，我想讨论“命令式编程”和“函数式编程”在语言特性上的意识形态，特别是它们允许开发人员用更少代码表达自己的机制。我认为构成命令式编程的一组特性形成了部分与函数式编程的受欢迎特性不兼容的主导编程单一文化，需要函数式编程的倡导者采取一些有趣的方式来吸引程序员的注意。

首先要尝试*表达性*，这里是一些经常见到的增加表达力的语言特性：

+   宏

+   并发性

+   变异

+   间接引用

+   惰性

+   动态类型

+   多态性

+   高阶函数

+   异常

+   Eval

+   输入/输出

+   续体

+   匿名函数

其中一些条目可能会让你笑，因为你可能不明白没有它们你怎么能编程。你可能会认出一些你喜欢的语言良好支持的特性，一些你的语言支持不太好的特性，以及一些你的语言根本不支持的特性。关于语言的文化也会有关于哪些特性可以使用、哪些特性不可以使用的传说（想想 Pythonic 或*JavaScript: The Good Parts*）。你选择的语言决定了你能够熟悉哪些特性。

表达力是有代价的，大多数开发人员在领域经验稍微积累后便能体会到。这里存在一种自然选择：语言特性如果被广泛支持、其他程序员知晓如何使用，并且能够完成工作，那么它们就会受到青睐——特别是社区效应加强了这些优势者。因此，我们有了开发者单一文化，这种文化大多数人对于变异、输入/输出、间接引用、异常、多态性等都感到舒适。但是，即使是当前编程实践的基本操作也不是没有代价的：想想“懂得指针和不懂得指针的人”之间的分歧，或者在 C++中使用异常时的运行时成本，以及多态性的表示复杂性（例如 Java 中的自动装箱和 Go 中的缺失）。

当有人进行*函数式编程倡导*时，他们实际上是在要求你更加仔细地审视我们增强表达力的其他机制。你可能会感觉到这些是你唯一听到的声音，因为提倡已被所有人使用的事物没什么意义。你可能会觉得热情不合理，因为这个特性似乎异常复杂（续延，有人吗？）或者你曾尝试在你喜欢的语言中使用它，没有什么比看到有人试图在 Python 中进行函数式编程更痛苦的了。事实上，向现有的单一文化中添加这些额外的语言特性并不容易。新特性之间的互动非常复杂和微妙。

这就是为什么函数式编程倡导者经常会要求你放弃一些你旧有的表达工具。他们会要求你放弃共享状态的变异，因为否则处理并发真的非常困难。他们会要求你放弃动态类型，因为否则高阶函数会变得更难以理解。 retic 会趋于“停止这样做！”，因为这是常见的实践-他们实际上不是要完全停下来，但对于功能性编程

我鼓励程序员尽可能多地了解表达自己的方式，即使他们的语言或工作场所不一定允许他们使用这种方法。原因多种多样：

1.  “任何足够复杂的程序最终都包含了一段糟糕的 Lisp 实现。” 不管你喜不喜欢，最终你将面对一个通过这些深入研究的语言特性轻松解决的难题，如果你必须手工实现它，最好从一开始就知道它会是什么样子。正如四人组曾经说过的那样，不实际支持语言的特性通常会表现为设计模式；了解这些模式会使你的代码更清晰、更干净。

1.  相反，如果你在阅读别人的代码时，他们倾向于使用其中的某个模式，知道这个特性应该如何工作将极大地帮助理解。

1.  库和框架被认为是开发者工具箱中必不可少的部分，然而它们似乎以令人眩晕的速度增长并过时。语言特性则是永恒的：1936 年（当阿隆佐·丘奇发明λ演算时），匿名函数至今仍然是匿名函数。

1.  学习语言特性是有趣的！与“又一个要记忆的 API”不同，语言特性会激发你的思维，使你对发生的事情非常认真地思考。

**tl;dr** 某些编程语言特性增强了开发者的表达能力，而“命令式编程方法论”则涵盖了广泛使用的具有这些语言特性的主导单一文化。但也有其他表达方式，鼓励程序员探索这些方法，即使实际使用时，需要停止使用一些他们喜爱的表达工具。
